### 150.**逆波兰表示式求值**

------

#### **题目描述**

给定一个字符串数组 `tokens`，表示一个根据逆波兰表示法（Reverse Polish Notation, RPN）表示的算术表达式。请你计算该表达式并返回结果。

**要求**：

- 有效的算符为 `+`、`-`、`*` 和 `/`。
- 每个操作数（运算对象）可以是一个整数或另一个表达式。
- 两个整数之间的除法总是向零截断。
- 表达式中不含除零运算。

------

#### **解题思路**

逆波兰表示法是一种后缀表达式，操作数在前，操作符在后。对于每个操作符，依次从栈中弹出两个操作数，进行相应的运算，然后将结果压入栈中，最终栈中留下的唯一元素就是最终结果。

1. **遍历 tokens 数组**：
   - 对于每个元素：
     - 如果是数字，将其转换为整数并压入栈中。
     - 如果是操作符（`+`、`-`、`*`、`/`），从栈中弹出两个数字，进行相应的运算，再将结果压入栈中。
2. **运算规则**：
   - 对于加法 `+`，弹出两个数字，进行相加。
   - 对于减法 `-`，弹出两个数字，进行相减（注意顺序）。
   - 对于乘法 `*`，弹出两个数字，进行相乘。
   - 对于除法 `/`，弹出两个数字，进行相除，且结果要向零截断。
3. **最终返回栈中的唯一元素**，即为表达式的结果。

------

#### **代码实现**

```java
class Solution {
    public int evalRPN(String[] tokens) {
        Deque<Integer> stack = new LinkedList<>();

        for (String s : tokens) {
            if (s.equals("+")) {
                stack.push(stack.pop() + stack.pop());
            } else if (s.equals("-")) {
                stack.push(-stack.pop() + stack.pop());
            } else if (s.equals("*")) {
                stack.push(stack.pop() * stack.pop());
            } else if (s.equals("/")) {
                int temp1 = stack.pop();
                int temp2 = stack.pop();
                stack.push(temp2 / temp1); // 注意：先弹出的数作为除数
            } else {
                stack.push(Integer.valueOf(s));
            }
        }
        return stack.pop(); // 返回栈中的唯一元素
    }
}
```

------

#### **复杂度分析**

1. **时间复杂度**：
   - 每个元素都只会入栈和出栈一次，因此总的时间复杂度为 **O(n)**，其中 `n` 为 `tokens` 数组的长度。
2. **空间复杂度**：
   - 由于使用栈存储中间结果，最坏情况下栈的大小为 `n`（当所有元素都是数字时），因此空间复杂度为 **O(n)**。

------

#### **关键点**

1. **栈的使用**：
    使用栈来存储数字，遇到操作符时从栈中弹出两个操作数，进行相应的运算，并将结果压回栈中。最终栈中只有一个元素，即为计算结果。
2. **除法的向零截断**：
    在进行除法时，特别要注意向零截断的操作。Java中 `/` 运算符会进行整数除法，但如果两个整数的符号不同，结果会自动向零截断。

------

#### **测试用例**

- **输入**：`["2", "1", "+", "3", "*"]`
   **输出**：`9`
   **解释**：
   `2 + 1 = 3`
   `3 * 3 = 9`
- **输入**：`["4", "13", "5", "/", "+"]`
   **输出**：`6`
   **解释**：
   `13 / 5 = 2`（向零截断）
   `4 + 2 = 6`
- **输入**：`["10", "6", "9", "3", "/", "-", "*"]`
   **输出**：`-6`
   **解释**：
   `9 / 3 = 3`
   `6 - 3 = 3`
   `10 * 3 = 30`
- **输入**：`["10", "2", "8", "*", "+", "3", "/"]`
   **输出**：`3`
   **解释**：
   `2 * 8 = 16`
   `10 + 16 = 26`
   `26 / 3 = 3`（向零截断）

------

#### **总结**

- **逆波兰表示法**：表达式的每个运算符都在其操作数后面，可以利用栈从左到右逐步计算。
- **栈的应用**：栈是处理这种类型问题的自然数据结构，尤其适合后缀表达式的求解。
- **除法细节**：需要特别注意除法的向零截断问题。

------

#### **扩展**

- **不同的表达式类型**：逆波兰表示法和中缀表达式之间的转换问题，可以使用栈来完成中缀到后缀的转换。