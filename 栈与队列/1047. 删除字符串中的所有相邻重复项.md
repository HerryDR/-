### **1047.重复项删除**

------

#### **题目描述**

给定一个由小写字母组成的字符串 `s`，需要反复删除相邻的两个相同字符，直到无法继续删除。返回最终的字符串，且答案保证唯一。

------

#### **解题思路**

- **使用栈消除重复字符**：
  1. 遍历字符串中的每个字符。
  2. 如果栈为空或者当前字符与栈顶字符不相同，则将当前字符压入栈。
  3. 如果当前字符与栈顶字符相同，则将栈顶字符弹出，表示这两个字符被消除。
  4. 遍历结束后，栈中剩余的字符即为结果。
- **结果重构**：
  - 使用 `res` 字符串重新拼接栈中的字符，构造最终的输出。

------

#### **代码实现**

```java
class Solution {
    public String removeDuplicates(String s) {
        Deque<Character> deque = new LinkedList<>();
        for (char c : s.toCharArray()) {
            if (deque.isEmpty() || c != deque.peek()) {
                deque.push(c); // 压入栈
            } else {
                deque.pop(); // 弹出栈顶
            }
        }
        String res = "";
        while (!deque.isEmpty()) {
            res = deque.pop() + res; // 倒序拼接栈中字符
        }
        return res;
    }
}
```

------

#### **复杂度分析**

1. **时间复杂度**：
   - 遍历字符串 O(n)。
   - 每个字符的栈操作（压入或弹出）均为 O(1)。
   - 总时间复杂度为 O(n)。
2. **空间复杂度**：
   - 栈的最坏情况下空间使用为 O(n)（所有字符均无重复时）。

------

#### **测试用例**

- **输入**：`"abbaca"`
   **输出**：`"ca"`
   **解释**：
  - 初始栈：空栈
  - 遍历过程：
    - `'a'` -> 入栈
    - `'b'` -> 入栈
    - `'b'` -> 栈顶相同，弹出
    - `'a'` -> 栈顶相同，弹出
    - `'c'` -> 入栈
    - `'a'` -> 入栈
  - 最终栈：`['c', 'a']`
- **输入**：`"azxxzy"`
   **输出**：`"ay"`
   **解释**：
  - 初始栈：空栈
  - 遍历过程：
    - `'a'` -> 入栈
    - `'z'` -> 入栈
    - `'x'` -> 入栈
    - `'x'` -> 栈顶相同，弹出
    - `'z'` -> 栈顶相同，弹出
    - `'y'` -> 入栈
  - 最终栈：`['a', 'y']`

------

#### **总结**

- **栈的特性**：
  - 栈的 **先进后出** 特性适合解决连续字符消除问题。
  - 使用 `Deque` 作为栈，方便操作 `push`、`pop` 和 `peek`。
- **关键细节**：
  - 判断栈是否为空是避免 `peek` 或 `pop` 抛出异常的重要条件。
  - 最终结果需要通过拼接栈中字符构造输出。
- **代码优化**：
  - 可以使用 `StringBuilder` 代替栈直接构造结果，避免最后的倒序拼接操作。

------

#### **扩展**

- 本题的思路可以拓展到其他需要消除匹配项的问题，例如括号匹配问题等。
- 对掌握栈的使用非常有帮助，是经典的栈模拟问题。